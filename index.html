<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="description" content="Free online salary calculator for India FY 2025-26 with tax, PF, HRA, gratuity, pension & loan EMI calculations. Understand your take-home pay, deductions and loan savings.">
  <meta name="keywords" content="salary calculator India, income tax calculator 2025-26, PF calculation, HRA exemption, gratuity calculator, pension calculator, loan EMI calculator, prepayment calculator, take home salary India">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Salary & Loan Calculator 2025-26 | Tax, PF, HRA, EMI Calculators</title>
  <link rel="icon" type="image/png" href="favicon-orange.png">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootswatch@5.3.3/dist/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

  <style>

/* Override info box background color to orange-yellow */
.info-box {
  background: #fffbe6 !important; /* Light yellow */
  border-left: 4px solid #ffc107 !important; /* Orange */
  color: #000 !important;
}
.info-box h3,
.info-box h4 {
  color: #e65100 !important; /* Darker orange */
}


/* UILizard Design Enhancements */

/* Tabs */
.tabs {
  display: flex;
  flex-wrap: wrap;
  background: #fff;
  padding: 10px;
  border-bottom: 1px solid #ddd;
}
.tab-button {
  background: #ffc107 !important; /* Orange background for all tab buttons */
  color: #333 !important;       /* Dark text for all tab buttons */
  font-weight: 600;
  padding: 10px 20px;
  border: none;
  margin: 5px;
  border-radius: 25px;
  cursor: pointer;
}
.tab-button.active {
  background: #e65100 !important; /* A darker orange for the active tab */
  color: white !important;
}
.tab-button:hover {
  background: #ffa000 !important; /* A slightly darker orange on hover */
}

/* Section Containers */
.container {
  background: #fff8e1 !important; /* Lightest yellow background */
  border-radius: 10px !important;
  padding: 20px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05) !important;
  margin-bottom: 20px !important;
}

/* Inputs */
input[type="number"],
input[type="text"],
input[type="email"],
input[type="password"],
input[type="search"],
select {
  width: 100% !important;
  padding: 12px 15px !important;
  border-radius: 8px !important;
  border: 1px solid #ccc !important;
  font-size: 1rem !important;
}

/* Buttons */
button.action {
  background: #ffc107 !important; /* Orange for action buttons */
  color: #333 !important;         /* Dark text for action buttons */
  padding: 10px 20px !important;
  border-radius: 8px !important;
  font-weight: bold !important;
  border: none !important;
  transition: background 0.3s ease !important;
}
button.action:hover {
  background: #ffa000 !important; /* Darker orange on hover */
}

/* Footer */
footer {
  background: #ffc107 !important; /* Orange footer */
  color: #333 !important;         /* Dark text for footer */
  text-align: center !important;
  padding: 30px 20px !important;
  font-size: 0.95rem !important;
}
footer a {
  color: #333 !important;         /* Dark text for footer links */
  text-decoration: underline !important;
}

    /* Your existing CSS variables, slightly adjusted for theme consistency if needed */
    :root {
      --orange: #e65100; /* Primary orange */
      --orange-dark: #bf360c; /* Darker shade */
      --yellow-light: #fff3e0; /* Lighter shade/background */
      --bg: #ffffff; /* A light yellow background */
      --success: #ffc107; /* Orange success color */
      --success-dark: #ffa000;
      --success-light: #fff8e1;
    }

    body {
      font-family: Arial, Helvetica, sans-serif;
      margin: 0;
      padding: 20px;
      background: var(--bg);
      color: #333;
      line-height: 1.6;
    }

    /* Layout */
    .main-layout {
      display: flex;
      width: 100%;
      gap: 20px;
    }
    .content-column {
      width: 80%; /* Updated to 80% for calculator */
    }
    .instructions-column {
      width: 20%;
      padding: 0;
    }
    .instructions-box {
      background: #fff;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0 0 5px #ccc;
      margin-top: 350px; /* Keep this to align with the main content */
    }

    /* TAB BAR */
.tabs {
  display: flex;
  margin-bottom: 20px;
  flex-wrap: wrap;
}
.tab-button {
  flex: 1 0 auto;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 12px;
  background: #ffc107 !important; /* Orange background */
  border: none;
  border-radius: 5px 5px 0 0;
  color: #333 !important; /* Dark text */
  font-weight: bold;
  cursor: pointer;
  position: relative;
  box-sizing: border-box;
  margin: 2px;
  min-width: 100px;
  transition: all 0.3s ease;
}
.tab-button.active {
  background: #e65100 !important; /* Darker orange for active */
  color: white !important;
  border: 2px solid #e65100 !important; /* Keep border consistent with active background */
  border-bottom: none !important;
  z-index: 1; /* Bring active tab to front */
}
.tab-button:hover:not(.active) {
  background: #ffa000 !important; /* Darker orange on hover */
  color: #333 !important;
}

    /* Dropdown */
    .dropdown-content {
      display: none;
      flex-direction: column;
      position: absolute;
      top: 100%;
      left: 0;
      width: 100%;
      background: #fff;
      border: 2px solid var(--orange);
      border-top: none;
      border-radius: 0 0 5px 5px;
      box-shadow: 0 4px 6px rgba(0,0,0,.08);
      z-index: 10;
    }
    .dropdown:hover .dropdown-content {
      display: flex;
    }
    .dropdown-content button {
      padding: 10px;
      background: none;
      border: none;
      text-align: left;
      cursor: pointer;
      color: #000;
      transition: background-color 0.2s ease;
    }
    .dropdown-content button:hover {
      background: var(--yellow-light);
    }

    /* PANELS */
    .container {
      display: none;
      background: #fff;
      padding: 15px;
      border-radius: 0 5px 5px 5px;
      box-shadow: 0 0 5px #ccc;
      margin-bottom: 20px;
      border: 1px solid #dee2e6; /* Add a subtle border */
    }
    .container.active {
      display: block;
    }

    /* Tables / Inputs */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
      border: 1px solid #dee2e6; /* Bootstrap-like table border */
    }
    th, td {
      border: 1px solid #dee2e6; /* Bootstrap table cell border */
      padding: 8px;
      text-align: left;
    }
    th {
      background: var(--yellow-light);
      color: var(--orange-dark);
    }
    input, select {
      width: 230px;
      padding: 5px;
      border: 1px solid #ced4da; /* Bootstrap form control border */
      border-radius: 0.25rem; /* Bootstrap form control border-radius */
    }
    button.action {
      margin-top: 20px;
      padding: 10px 15px;
      background: #ffc107; /* Orange button background color */
      color: #333; /* Dark text for better contrast */
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    button.action:hover {
      background: #ffa000; /* Darker shade for hover effect */
    }
    
    /* Fix dropdown text overflow */
.dropdown-content {
  white-space: normal !important;
  word-wrap: break-word;
  width: max-content;
  max-width: 250px;
  overflow-wrap: break-word;
}


    /* Info sections */
  .info-box {
      background: #fffbe6; /* Light yellow info box background color */
      padding: 15px;
      border-radius: 5px;
      margin-top: 30px;
      border-left: 4px solid #ffc107; /* Orange border */
      color: #000000; /* Set default text color for info-box to black */
    }
    .info-box h3 {
      margin-top: 0;
      color: #e65100; /* Set h3 text color in info-box to darker orange */
    }
    .info-box ul {
      padding-left: 20px;
    }
    .info-box li {
      margin-bottom: 8px;
    }
    .info-box p, .info-box ul, .info-box li { /* Ensure paragraphs and list items are also black */
        color: #000000;
    }
    .emi-breakup {
      margin-top: 20px;
      overflow-x: auto;
    }

    /* Instructions */
    .instructions-box h3 {
      margin-top: 0;
      color: var(--orange-dark);
      padding-left: 15px;
    }
    .instructions-box ul {
      padding-left: 20px;
    }
    .instructions-box li {
      margin-bottom: 8px;
    }

    /* Footer */
    footer {
      margin-top: 40px;
      padding: 20px;
      text-align: center;
      background: #fff;
      border-top: 1px solid #ccc;
      font-size: 0.9em;
      color: #666;
    }

    /* Override Bootstrap defaults for specific elements if necessary */
    h1 {
      color: var(--orange-dark); /* Match heading color to theme */
    }
@media (max-width: 768px) {
  .main-layout {
    flex-direction: column;
  }

  .content-column,
  .instructions-column {
    width: 100% !important;
  }

  .instructions-box {
    margin-top: 20px;
  }

  .tabs {
    flex-direction: column;
    align-items: stretch;
  }

  .tab-button {
    width: 100%;
    min-width: unset;
    justify-content: space-between;
    padding: 10px;
    font-size: 1rem;
  }

  .dropdown-content {
    position: relative;
    border: 1px solid var(--orange);
    border-radius: 0 0 5px 5px;
    box-shadow: none;
    width: 100%;
    max-width: 100%;
  }

  table,
  .table {
    font-size: 0.9rem;
  }

  input,
  select {
    width: 100% !important;
  }

  .info-box {
    font-size: 0.95rem;
  }

  button.action {
    width: 100%;
    font-size: 1rem;
  }
  .custom-lead {
  font-size: 0.9rem;
  line-height: 1.4;
  }
}
h1 {
  text-align: center; /* Centers inline-block elements like img */
  margin-top: 20px; /* Adds some space from the top of the page */
  margin-bottom: 20px; /* Adds space below the logo */
}

#logo-img {
  display: block; /* Ensures margin: auto works for horizontal centering */
  margin-left: auto;
  margin-right: auto;
  height: 150px; /* Set your desired height here */
  /* Add any other styles like max-width if needed for responsiveness */
}

@media (max-width: 768px) {
    #logo-img {
        height: 50px; /* Adjust height for smaller screens if desired */
    }
}
/* 👇 Move Chatbase chatbot slightly to the left */
iframe[src*="chatbase.co"] {
    right: 1000px !important; /* Default is ~20px, increase to shift left */
    bottom: 20px !important;
}
.container h2 {
  color: #ff9800 !important; /* Light orange */
}

  </style>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-EXT7XHZ87R"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-EXT7XHZ87R');
  </script>
</head>
<body>
  <div class="main-layout">
    <div class="content-column">
       <h1>
    <img id="logo-img" src="logoorange.png" alt="CTC to Salary Calculator">   
  </h1>
 <p class="custom-lead">Use our powerful Salary calculator, Income tax calculator, PF/gratuity calculator, and loan calculator to calculate your net in hand salary, income tax and more.</p>

      <div class="tabs nav nav-tabs">
        <div class="tab-button dropdown active" id="salaryDropdown">Salary
          <div class="dropdown-content">
            <button class="dropdown-item" onclick="showCalc('salaryEmployee')">Salary calculator 2025‑26</button>
            <button class="dropdown-item" onclick="showCalc('salaryEmployer')">Salary for employers</button>
          </div>
        </div>
        <button class="tab-button nav-link" id="taxTab" onclick="showCalc('taxCalc')">Income Tax</button>
        <button class="tab-button nav-link" id="pfTab" onclick="showCalc('pfCalc')">PF / Gratuity</button>
        <button class="tab-button nav-link" id="hraTab" onclick="showCalc('hraCalc')">HRA Exemption</button>
        <button class="tab-button nav-link" id="pensionTab" onclick="showCalc('pension')">Pension</button>
        <div class="tab-button dropdown" id="loanDropdown">Loan
          <div class="dropdown-content">
            <button class="dropdown-item" onclick="showCalc('emiCalc')">EMI Calculator</button>
            <button class="dropdown-item" onclick="showCalc('prepaymentCalc')">Prepayment Calculator</button>
          </div>
        </div>
      </div>

      <div id="salaryEmployee" class="container active">
        <h2 class="mb-3">Salary Calculator for Employees 2025‑26</h2>
        <div class="table-responsive">
          <table class="table table-bordered">
            <tr><td>Annual CTC (₹)</td><td><input type="number" id="ctc" placeholder="e.g. 800000" class="form-control"></td></tr>
            <tr><td>Basic % of CTC</td><td><input type="number" id="basicPercent" value="40" min="20" max="70" class="form-control"></td></tr>
          </table>
        </div>
        <button class="action btn btn-primary" onclick="calcSalary()">Calculate My Salary</button>
        <div id="salResult" class="mt-4"></div>

        <div class="info-box alert alert-primary mt-4">
          <h3 class="alert-heading">Understanding Salary Structure in India</h3>
          <p>Your <b>Cost to Company (CTC)</b> includes various salary components that determine your take-home salary and <b>income tax</b> obligations. Use our <b>CTC calculator</b> and <b>salary calculator</b> to break down each part of your salary and <b>calculate tax</b> accurately for FY 2025-26.</p>
          
          <h4>Key Salary Components</h4>
          <ul>
            <li><b>Basic Salary</b> (40-50% of CTC): Core component, fully taxable, determines <b>PF contributions</b> and <b>gratuity</b>.</li>
            <li><b>House Rent Allowance (HRA)</b>: 40-50% of basic salary. Use our <b>HRA exemption calculator</b> for <b>HRA tax exemption</b>.</li>
            <li><b>Special Allowances</b>: Fully taxable, balances your salary structure.</li>
          </ul>
          
          <h4>Mandatory Deductions</h4>
          <ul>
            <li><b>Employee Provident Fund (EPF)</b>: 12% of basic salary deducted, matched by employer. Use our <b>calculator PF</b> to <b>calculate EPF</b>.</li>
            <li><b>Professional Tax</b>: ₹200-300/month, varies by state.</li>
            <li><b>Income Tax</b>: Use our <b>income tax calculator</b> to determine <b>income tax to pay</b> based on <b>income tax slabs in India</b>.</li>
        </ul>


          
          <p><strong>Note:</strong>  Basic salary should be 20-50% of CTC for optimal <b>PF</b> and <b>gratuity</b> benefits. Use our <b>CTC calculator</b> for precise calculations.</p>

        </div>
      </div>

      <div id="salaryEmployer" class="container">
        <h2 class="mb-3">Employer Salary Calculator 2025‑26</h2>
        <div class="table-responsive">
          <table class="table table-bordered">
            <tr><td>Desired Net Monthly Take‑Home (₹)</td><td><input type="number" id="desiredNet" placeholder="e.g. 50000" class="form-control"></td></tr>
            <tr><td>Basic % of Gross</td><td><input type="number" id="empBasicPercent" value="40" min="20" max="70" class="form-control"></td></tr>
          </table>
        </div>
        <button class="action btn btn-primary" onclick="calcEmployer()">Calculate CTC</button>
        <div id="empResult" class="mt-4"></div>

        <div class="info-box alert alert-primary mt-4">
          <h3 class="alert-heading">Employer Compliance Requirements in India</h3>
          <p>Structuring salaries requires compliance with statutory components to optimize <b>tax in India</b> and employee benefits.</p>
          
          <h4>Mandatory Contributions</h4>
           <ul>
            <li><b>Provident Fund (PF)</b>: 12% of basic salary (up to ₹15,000). Use our <b>calculator PF</b> to estimate contributions.</li>
            <li><b>Employee State Insurance (ESI)</b>: 3.25% employer + 0.75% employee for gross ≤ ₹21,000.</li>
            <li><b>Gratuity</b>: 4.81% of basic salary after 5 years. Use our <b>calculator gratuity</b> for projections.</li>
        </ul>

          
          <h4>Salary Structure Best Practices</h4>
         <ul>
            <li>Maintain basic salary at 40-50% of CTC for optimal <b>PF</b> and <b>gratuity</b>.</li>
            <li>Include <b>HRA</b> for <b>HRA tax exemption</b> benefits.</li>
            <li>Offer medical allowance and LTA for additional <b>tax exemptions</b>.</li>
        </ul>

          
          <p><strong>Note:</strong> This calculator provides estimates based on standard deductions. Actual costs may vary based on company policies and state-specific regulations.</p>
        </div>
      </div>

      <div id="taxCalc" class="container">
        <h2 class="mb-3">Income‑Tax calculator (FY 2025‑26)</h2>
        <div class="table-responsive">
          <table class="table table-bordered">
            <tr><td>Total Gross Income (₹)</td><td><input type="number" id="grossInc" placeholder="e.g. 1200000" class="form-control"></td></tr>
            <tr><td>80C Investments ≤ 1.5 L</td><td><input type="number" id="ded80c" placeholder="e.g. 150000" class="form-control"></td></tr>
            <tr><td>NPS 80CCD(1B) ≤ 50 k</td><td><input type="number" id="dedNps" placeholder="e.g. 50000" class="form-control"></td></tr>
            <tr><td>80D Health Insurance</td><td><input type="number" id="ded80d" placeholder="e.g. 25000" class="form-control"></td></tr>
            <tr><td>Home‑loan interest 24b ≤ 2 L</td><td><input type="number" id="ded24b" placeholder="e.g. 200000" class="form-control"></td></tr>
            <tr><td>Education‑loan 80E</td><td><input type="number" id="ded80e" placeholder="e.g. 50000" class="form-control"></td></tr>
            <tr><td>Donations 80G</td><td><input type="number" id="ded80g" placeholder="e.g. 10000" class="form-control"></td></tr>
            <tr><td>Other deductions</td><td><input type="number" id="dedOther" placeholder="e.g. 20000" class="form-control"></td></tr>
            <tr><td>Tax Regime</td><td><select id="taxRegime" class="form-select"><option value="new">New</option><option value="old">Old</option></select></td></tr>
          </table>
        </div>
        <button class="action btn btn-primary" onclick="calcIncomeTax()">Compute Tax</button>
        <div id="taxResult" class="mt-4"></div>

        <div class="info-box alert alert-primary mt-4">
          <h3 class="alert-heading">Income Tax Slabs and Rules FY 2025-26</h3>
          <p>India offers two tax regimes with different deduction options. Choose wisely based on your investments and expenses:</p>
          
          <h4>New Tax Regime (Default)</h4>
          <ul>
            <li>Lower <b>tax slabs</b>: 0% up to ₹3L, 5% (3-6L), 10% (6-9L), 15% (9-12L), 20% (12-15L), 30% (>15L).</li>
                             <li>Lower tax rates but fewer deductions</li>
            <li>Standard deduction of ₹50,000 available</li>
            <li>Tax slabs: 0% up to ₹3L, 5% (3-6L), 10% (6-9L), 15% (9-12L), 20% (12-15L), 30% (above 15L)</li>
            <li>Rebate up to ₹25,000 for taxable income ≤ ₹7L</li>
          </ul>
          
          <h4>Old Tax Regime</h4>
          <ul>
            <li>Higher tax rates but more deductions</li>
            <li>Standard deduction ₹50,000</li>
            <li>Section 80C deductions up to ₹1.5L (PF, LIC, PPF, ELSS, etc.)</li>
            <li>NPS additional ₹50k deduction (80CCD(1B))</li>
            <li>Health insurance up to ₹25k (₹50k for seniors) under 80D</li>
            <li>Tax slabs: 0% up to ₹2.5L, 5% (2.5-5L), 20% (5-10L), 30% (above 10L)</li>
          </ul>
          
          <h4>Which Regime is Better?</h4>
          <p>The new regime typically benefits those with few investments/deductions, while the old regime helps those with substantial tax-saving investments. Use this calculator to compare both options.</p>
          
          <p><strong>Note:</strong> 4% health & education cess applies on total tax in both regimes. Senior citizens (60+) and super seniors (80+) have higher exemption limits.</p>
        </div>
      </div>

      <div id="pfCalc" class="container">
        <h2 class="mb-3">EPF & Gratuity Calculator 2025-26</h2>
        <div class="table-responsive">
          <table class="table table-bordered">
            <tr><td>Current Monthly Basic (₹)</td><td><input type="number" id="pfBasic" placeholder="e.g. 30000" class="form-control"></td></tr>
            <tr><td>Years completed</td><td><input type="number" id="yearsDone" placeholder="e.g. 5" class="form-control"></td></tr>
            <tr><td>Years left</td><td><input type="number" id="yearsLeft" placeholder="e.g. 20" class="form-control"></td></tr>
            <tr><td>Current PF balance (₹)</td><td><input type="number" id="currentPF" placeholder="e.g. 200000" class="form-control"></td></tr>
            <tr><td>Annual PF interest %</td><td><input type="number" id="pfRate" value=" fetchBalance() * 0.0825" step="0.1" class="form-control"></td></tr>
          </table>
        </div>
        <button class="action btn btn-primary" onclick="calcPF()">Project My Benefits</button>
        <div id="pfResult" class="mt-4"></div>

        <div class="info-box alert alert-primary mt-4">
          <h3 class="alert-heading">EPF and Gratuity Rules in India</h3>
         <p>Use our <b>calculator PF</b> and <b>calculator gratuity</b> to <b>calculate EPF</b> and gratuity benefits with the latest <b>PF interest rate</b> of 8.25% for FY 2025-26.</p>
          
          <h4>Employee Provident Fund (EPF)</h4>
          <ul>
            <li><strong>Contribution:</strong> 12% of basic salary from employee + 12% from employer (3.67% to EPF, 8.33% to EPS)</li>
            <li><strong>Current interest rate:</strong> 8.25% for FY 2025-26 (compounded monthly)</li>
            <li><strong>Tax benefits:</strong> Contributions deductible under 80C, interest tax-free, withdrawals tax-free after 5 years</li>
            <li><strong>Withdrawal rules:</strong> Allowed after 2 months of unemployment (taxable if before 5 years)</li>
          </ul>
          
          <h4>Gratuity Benefits</h4>
          <ul>
            <li><strong>Eligibility:</strong> Payable after 5 years of continuous service</li>
            <li><strong>Calculation:</strong> (Last drawn basic × 15/26) × Years of service</li>
            <li><strong>Tax treatment:</strong> Tax-free up to ₹20 lakh</li>
            <li><strong>Coverage:</strong> Mandatory for organizations with 10+ employees under Payment of Gratuity Act</li>
          </ul>
          
          <h4>Maximizing Your Benefits</h4>
          <ul>
            <li>Maintain higher basic salary to increase PF and gratuity amounts</li>
            <li>Continue PF account when changing jobs (transfer instead of withdrawing)</li>
            <li>Consider voluntary PF contributions (VPF) for higher tax-free returns</li>
          </ul>
        </div>
      </div>

      <div id="hraCalc" class="container">
        <h2 class="mb-3">HRA Exemption Calculator (Old Regime)</h2>
        <div class="table-responsive">
          <table class="table table-bordered">
            <tr><td>Monthly Basic Salary (₹)</td><td><input type="number" id="hraBasic" placeholder="e.g. 30000" class="form-control"></td></tr>
            <tr><td>Monthly HRA received (₹)</td><td><input type="number" id="hraRec" placeholder="e.g. 15000" class="form-control"></td></tr>
            <tr><td>Monthly Rent paid (₹)</td><td><input type="number" id="rentPaid" placeholder="e.g. 12000" class="form-control"></td></tr>
            <tr><td>Metro city?</td><td><select id="isMetro" class="form-select"><option value="yes">Yes (Delhi/Mumbai/Kolkata/Chennai)</option><option value="no" selected>No</option></select></td></tr>
          </table>
        </div>
        <button class="action btn btn-primary" onclick="calcHRA()">Calculate HRA Exemption</button>
        <div id="hraResult" class="mt-4"></div>

        <div class="info-box alert alert-primary mt-4">
          <h3 class="alert-heading">HRA Exemption Rules and Tax Benefits</h3>
                        <p>Maximize your <b>HRA tax exemption</b> with our <b>HRA exemption calculator</b> and <b>HRA rebate calculator</b> for accurate <b>HRA calculation</b>.</p>
          <p>House Rent Allowance (HRA) provides significant tax savings for salaried individuals in India. Here's everything you need to know:</p>
          
          <h4>HRA Exemption Calculation</h4>
          <p>Your HRA exemption is the <strong>lowest</strong> of these three amounts:</p>
          <ol>
            <li>Actual HRA received from employer</li>
            <li>50% of basic salary for metro cities (40% for non-metro)</li>
            <li>Rent paid minus 10% of basic salary</li>
          </ol>
          
          <h4>Documentation Requirements</h4>
          <ul>
            <li>Rent receipts showing landlord name, address and amount</li>
            <li>Rent agreement (not mandatory but recommended)</li>
            <li>Landlord PAN required if annual rent exceeds ₹1 lakh</li>
            <li>Bank proof of rent payments for high amounts</li>
          </ul>
          
          <h4>Special Cases</h4>
          <ul>
            <li><strong>Living with parents:</strong> Can claim HRA if paying rent to them (need proper documentation)</li>
            <li><strong>No HRA component:</strong> Can claim deduction under Section 80GG (up to ₹60,000 annually)</li>
            <li><strong>Self-employed:</strong> Not eligible for HRA exemption</li>
          </ul>
          
          <p><strong>Metro cities:</strong> Delhi, Mumbai, Kolkata, Chennai. All other locations are considered non-metro for HRA purposes.</p>
        </div>
      </div>

      <div id="pension" class="container">
        <h2 class="mb-3">Pension Calculator for Employees</h2>
        <div class="table-responsive">
          <table class="table table-bordered">
            <tr><td>Last Drawn Basic (₹)</td><td><input type="number" id="lastBasic" placeholder="e.g. 50000" class="form-control"></td></tr>
            <tr><td>Total Years of Service</td><td><input type="number" id="serviceYears" placeholder="e.g. 30" class="form-control"></td></tr>
            <tr><td>Pension Factor</td><td><input type="number" id="pensFactor" value="1" step="0.01" class="form-control"></td></tr>
          </table>
        </div>
        <button class="action btn btn-primary" onclick="calcPension()">Calculate My Pension</button>
        <div id="pensResult" class="mt-4"></div>

        <div class="info-box alert alert-primary mt-4">
          <h3 class="alert-heading">Pension Options for Indian Employees</h3>
          <p>Employees in India can benefit from multiple pension schemes. Understand your options for retirement planning:</p>
          
          <h4>Employee Pension Scheme (EPS)</h4>
          <ul>
            <li><strong>Eligibility:</strong> Minimum 10 years service (EPF members)</li>
            <li><strong>Calculation:</strong> (Pensionable salary × Pensionable service)/70</li>
            <li><strong>Pensionable salary:</strong> Average of last 60 months basic, capped at ₹15,000</li>
            <li><strong>Minimum pension:</strong> ₹1,000 per month</li>
            <li><strong>Commutation:</strong> Up to 40% can be taken as lump sum at retirement</li>
          </ul>
          
          <h4>National Pension System (NPS)</h4>
          <ul>
            <li><strong>Contributions:</strong> Minimum ₹6,000 annually (Tier I account)</li>
            <li><strong>Tax benefits:</strong> Additional ₹50,000 deduction under 80CCD(1B)</li>
            <li><strong>Withdrawal rules:</strong> 60% tax-free at 60, 40% must be used to buy annuity</li>
            <li><strong>Returns:</strong> Market-linked, typically 8-10% historically</li>
          </ul>
          
          <h4>Company Pension Plans</h4>
          <ul>
            <li>Some organizations offer additional pension benefits</li>
            <li>May include defined benefit or defined contribution plans</li>
            <li>Check with your HR department for specific benefits</li>
          </ul>
          
          <p><strong>Note:</strong> The calculator provides EPS pension estimates. For comprehensive retirement planning, consider combining EPS with NPS and other investments.</p>
        </div>
      </div>

      <div id="emiCalc" class="container">
        <h2 class="mb-3">Loan EMI Calculator</h2>
        <div class="table-responsive">
          <table class="table table-bordered">
            <tr><td>Loan Amount (₹)</td><td><input type="number" id="loanAmount" placeholder="e.g. 5000000" class="form-control"></td></tr>
            <tr><td>Interest Rate (% p.a.)</td><td><input type="number" id="interestRate" step="0.01" placeholder="e.g. 8.5" class="form-control"></td></tr>
            <tr><td>Loan Tenure (years)</td><td><input type="number" id="loanTenure" placeholder="e.g. 20" class="form-control"></td></tr>
          </table>
        </div>
        <button class="action btn btn-primary" onclick="calculateEMI()">Calculate EMI</button>
        <div id="emiResult" class="mt-4"></div>
        <div id="emiBreakup" class="emi-breakup table-responsive"></div>

        <div class="info-box alert alert-primary mt-4">
          <h3 class="alert-heading">Understanding Loan EMIs in India</h3>
                        <p>Use our <b>loan EMI calculator</b> to compute affordable EMIs and plan <b>tax exemptions</b> on home loan interest.</p>
          <p>Equated Monthly Installments (EMIs) are fixed payments made by borrowers to lenders at specified dates. Here's how they work:</p>
          
          <h4>How EMIs Are Calculated</h4>
          <p>The EMI formula considers three factors:</p>
          <ul>
            <li><strong>Principal amount:</strong> Total loan amount borrowed</li>
            <li><strong>Interest rate:</strong> Annual rate charged by lender</li>
            <li><strong>Loan tenure:</strong> Duration to repay (in months/years)</li>
          </ul>
          
          <p>The standard formula used is:</p>
          <p><strong>EMI = [P x R x (1+R)^N]/[(1+R)^N-1]</strong></p>
          <p>Where P=Principal, R=Monthly interest rate, N=Tenure in months</p>
          
          <h4>Current Home Loan Rates in India (2025)</h4>
          <ul>
            <li>Public sector banks: 8.4% - 9.5% p.a.</li>
            <li>Private banks: 8.9% - 10.5% p.a.</li>
            <li>HDFC, SBI, LIC Housing offer special rates for women borrowers</li>
          </ul>
          
          <h4>Types of Interest Rates</h4>
          <ul>
            <li><strong>Fixed rate:</strong> Interest remains constant throughout tenure</li>
            <li><strong>Floating rate:</strong> Changes with market conditions (linked to MCLR/RLLR)</li>
            <li><strong>Hybrid:</strong> Fixed for initial years, then floating</li>
          </ul>
          
          <p><strong>Tip:</strong> Use this calculator to compare loan offers from different banks and find the most affordable option.</p>
        </div>
      </div>

      <div id="prepaymentCalc" class="container">
        <h2 class="mb-3">Loan Prepayment Calculator</h2>
        <div class="table-responsive">
          <table class="table table-bordered">
            <tr><td>Current Loan Balance (₹)</td><td><input type="number" id="currentBalance" placeholder="e.g. 3500000" class="form-control"></td></tr>
            <tr><td>Interest Rate (% p.a.)</td><td><input type="number" id="prepayRate" step="0.01" placeholder="e.g. 8.5" class="form-control"></td></tr>
            <tr><td>Remaining Tenure (months)</td><td><input type="number" id="remainingTenure" placeholder="e.g. 180" class="form-control"></td></tr>
            <tr><td>EMI Amount (₹)</td><td><input type="number" id="currentEMI" placeholder="e.g. 35000" class="form-control"></td></tr>
            <tr><td>Prepayment Amount (₹)</td><td><input type="number" id="prepayAmount" placeholder="e.g. 500000" class="form-control"></td></tr>
            <tr><td>Prepayment Type</td>
                <td><select id="prepayType" class="form-select">
                    <option value="reduceEMI">Reduce EMI</option>
                    <option value="reduceTenure">Reduce Tenure</option>
                </select></td></tr>
          </table>
        </div>
        <button class="action btn btn-primary" onclick="calculatePrepayment()">Calculate Savings</button>
        <div id="prepayResult" class="mt-4"></div>

        <div class="info-box alert alert-primary mt-4">
          <h3 class="alert-heading">Loan Prepayment Benefits and Rules in India</h3>
                        <p>Save on interest with our <b>loan prepayment calculator</b> to optimize your loan repayment strategy.</p>

          <p>Making prepayments on your loan can save significant interest costs. Here's what Indian borrowers should know:</p>
          
          <h4>Prepayment Rules in India</h4>
          <ul>
            <li><strong>Home loans:</strong> Most banks allow unlimited prepayment of floating rate loans</li>
            <li><strong>Fixed rate loans:</strong> May have prepayment penalties (1-3% of outstanding)</li>
            <li><strong>Personal loans:</strong> Prepayment charges vary by lender (typically 2-5%)</li>
            <li><strong>Tax benefits:</strong> Prepayment doesn't affect Section 24 and 80C deductions</li>
          </ul>
          
          <h4>Prepayment Strategies</h4>
          <ul>
            <li><strong>Reduce EMI:</strong> Maintain original tenure but lower monthly payments</li>
            <li><strong>Reduce tenure:</strong> Keep same EMI but pay off loan faster</li>
            <li><strong>Partial prepayment:</strong> Make lump sum payments when possible</li>
            <li><strong>Increase EMI:</strong> As salary grows, increase EMI to reduce tenure</li>
          </ul>
          
          <h4>Which Option Saves More?</h4>
          <p><strong>Reducing tenure</strong> typically saves more interest than reducing EMI, as the principal reduces faster. However, choose based on your cash flow needs.</p>
          
          <h4>Current Prepayment Charges (2025)</h4>
          <ul>
            <li>SBI: Nil for floating rate home loans</li>
            <li>HDFC: 1-2% for fixed rate loans</li>
            <li>ICICI: Nil for floating rate, 2% for fixed rate</li>
          </ul>
          
          <p><strong>Tip:</strong> Use bonuses, tax refunds or investments to make prepayments and become debt-free faster.</p>
        </div>
      </div>
    </div>

    <div class="instructions-column">
      <div class="instructions-box card card-body" id="instructionsBox">
        <h3 class="card-title"> How to Use</h3>
        <ol>
          <li>Enter your <strong>Annual CTC</strong> (Cost to Company) in rupees.</li>
          <li>Specify the <strong>Basic % of CTC</strong> (typically 20-50%).</li>
          <li>Click <strong>Calculate My Salary</strong> to see your take-home salary, tax, PF, and other deductions.</li>
          <li>Review the results table for a detailed breakdown.</li>
        </ol>
      </div>
    </div>
  </div>

  <footer class="mt-5">
    <p>
      Our calculator has been extensively tested for correct functionality. However, no guarantee can be given for the results. 
      <a href="privacy.html" class="text-decoration-none">Privacy Policy</a>
    </p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

  <script type="text/javascript">
    var gk_isXlsx = false;
    var gk_xlsxFileLookup = {};
    var gk_fileData = {};
    function filledCell(cell) {
      return cell !== '' && cell != null;
    }
    function loadFileData(filename) {
      if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
        try {
          var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
          var firstSheetName = workbook.SheetNames[0];
          var worksheet = workbook.Sheets[firstSheetName];
          var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
          var filteredData = jsonData.filter(row => row.some(filledCell));
          var headerRowIndex = filteredData.findIndex((row, index) =>
            row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
          );
          if (headerRowIndex === -1 || headerRowIndex > 25) {
            headerRowIndex = 0;
          }
          var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex));
          csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
          return csv;
        } catch (e) {
          console.error(e);
          return "";
        }
      }
      return gk_fileData[filename] || "";
    }

    // Helper to render results table
    function fmt(num){return Number(num).toLocaleString('en-IN',{maximumFractionDigits:2});}
    // Updated makeTable to use Bootstrap table classes
    const makeTable=rows=>`<table class="table table-bordered table-striped mt-3"><thead><tr><th>Component</th><th>Amount (₹)</th></tr></thead><tbody>${rows.map(r=>`<tr><td>${r[0]}</td><td>${fmt(r[1])}</td></tr>`).join('')}</tbody></table>`;

    // Instructions content
    const instructionsContent = {
      salaryEmployee: `
        <h3 class="card-title">How to Use</h3>
        <ol>
          <li>Enter your <strong>Annual CTC</strong> (Cost to Company) in rupees.</li>
          <li>Specify the <strong>Basic % of CTC</strong> (typically 20-50%).</li>
          <li>Click <strong>Calculate My Salary</strong> to see your take-home salary, tax, PF, and other deductions.</li>
          <li>Review the results table for a detailed breakdown.</li>
        </ol>
      `,
      salaryEmployer: `
        <h3 class="card-title">How to Use</h3>
        <ol>
          <li>Enter the <strong>Desired Net Monthly Take-Home</strong> salary in rupees.</li>
          <li>Specify the <strong>Basic % of Gross</strong> (typically 40-50%).</li>
          <li>Click <strong>Calculate CTC</strong> to estimate the total Cost to Company, including PF and gratuity.</li>
          <li>Review the results table for the CTC breakdown.</li>
        </ol>
      `,
      taxCalc: `
        <h3 class="card-title">How to Use</h3>
        <ol>
          <li>Enter your <strong>Total Gross Income</strong> for FY 2025-26.</li>
          <li>Input deductions like <strong>80C, NPS, 80D, etc.</strong> (if applicable).</li>
          <li>Select the <strong>Tax Regime</strong> (New or Old).</li>
          <li>Click <strong>Compute Tax</strong> to see your tax liability and deductions.</li>
        </ol>
      `,
      pfCalc: `
        <h3 class="card-title">How to Use</h3>
        <ol>
          <li>Enter your <strong>Current Monthly Basic</strong> salary.</li>
          <li>Input <strong>Years Completed</strong> and <strong>Years Left</strong> in service.</li>
          <li>Provide your <strong>Current PF Balance</strong> and <strong>Annual PF Interest Rate</strong>.</li>
          <li>Click <strong>Project My Benefits</strong> to estimate your PF corpus and gratuity.</li>
        </ol>
      `,
      hraCalc: `
        <h3 class="card-title">How to Use</h3>
        <ol>
          <li>Enter your <strong>Monthly Basic Salary</strong> and <strong>HRA Received</strong>.</li>
          <li>Input the <strong>Monthly Rent Paid</strong>.</li>
          <li>Select whether you live in a <strong>Metro City</strong>.</li>
          <li>Click <strong>Calculate HRA Exemption</strong> to see your tax-exempt HRA amount.</li>
        </ol>
      `,
      pension: `
        <h3 class="card-title">How to Use</h3>
        <ol>
          <li>Enter your <strong>Last Drawn Basic</strong> salary.</li>
          <li>Input your <strong>Total Years of Service</strong>.</li>
          <li>Specify the <strong>Pension Factor</strong> (default is 1).</li>
          <li>Click <strong>Calculate My Pension</strong> to estimate your monthly and annual pension.</li>
        </ol>
      `,
      emiCalc: `
        <h3 class="card-title">How to Use</h3>
        <ol>
          <li>Enter the <strong>Loan Amount</strong> in rupees.</li>
          <li>Input the <strong>Interest Rate</strong> (% per annum).</li>
          <li>Specify the <strong>Loan Tenure</strong> in years.</li>
          <li>Click <strong>Calculate EMI</strong> to see your monthly EMI and amortization table.</li>
        </ol>
      `,
      prepaymentCalc: `
        <h3 class="card-title">How to Use</h3>
        <ol>
          <li>Enter your <strong>Current Loan Balance</strong> and <strong>Interest Rate</strong>.</li>
          <li>Input the <strong>Remaining Tenure</strong> (in months) and <strong>Current EMI</strong>.</li>
          <li>Specify the <strong>Prepayment Amount</strong> and <strong>Prepayment Type</strong>.</li>
          <li>Click <strong>Calculate Savings</strong> to see interest savings and new loan terms.</li>
        </ol>
      `
    };

    // Tab switcher with instructions update
    function showCalc(id){
      document.querySelectorAll('.container').forEach(c=>c.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('.tab-button').forEach(b=>b.classList.remove('active', 'nav-link', 'active')); // Remove nav-link active class
      document.querySelectorAll('.dropdown-item').forEach(d=>d.classList.remove('active')); // Remove dropdown item active state

      if(id.startsWith('salary')){
        document.getElementById('salaryDropdown').classList.add('active');
        document.querySelector(`#salaryDropdown .dropdown-content button[onclick="showCalc('${id}')"]`).classList.add('active');
      }else if(id.startsWith('emi') || id.startsWith('prepayment')){
        document.getElementById('loanDropdown').classList.add('active');
        document.querySelector(`#loanDropdown .dropdown-content button[onclick="showCalc('${id}')"]`).classList.add('active');
      }else{
        const map={taxCalc:'taxTab',pfCalc:'pfTab',hraCalc:'hraTab',pension:'pensionTab'};
        document.getElementById(map[id]).classList.add('active');
        document.getElementById(map[id]).classList.add('nav-link', 'active'); // Add nav-link active class
      }
      // Update instructions
      document.getElementById('instructionsBox').innerHTML = instructionsContent[id];
    }

    // Initial load for Salary Employee tab
    document.addEventListener('DOMContentLoaded', () => {
      showCalc('salaryEmployee');
    });

    // EMI Calculator
    function calculateEMI(){
      const principal = parseFloat(document.getElementById('loanAmount').value);
      const rate = parseFloat(document.getElementById('interestRate').value)/1200; // monthly rate
      const tenure = parseFloat(document.getElementById('loanTenure').value)*12; // in months
      
      if(!principal || !rate || !tenure) {
        document.getElementById('emiResult').innerHTML = '<p class="text-danger">Please enter valid values for all fields.</p>';
        return;
      }
      
      const emi = principal * rate * Math.pow(1+rate, tenure) / (Math.pow(1+rate, tenure)-1);
      const totalPayment = emi * tenure;
      const totalInterest = totalPayment - principal;
      
      document.getElementById('emiResult').innerHTML=makeTable([
        ['Monthly EMI', emi],
        ['Total Interest', totalInterest],
        ['Total Payment', totalPayment],
        ['Principal Amount', principal]
      ]);
      
      // Generate amortization table
      let balance = principal;
      let amortization = '<h3 class="mt-4">Year-wise Breakup</h3><div class="table-responsive"><table class="table table-bordered table-striped"><thead><tr><th>Year</th><th>Principal (₹)</th><th>Interest (₹)</th><th>Balance (₹)</th></tr></thead><tbody>';
      
      for(let year=1; year<=tenure/12; year++){
        let yearPrincipal = 0;
        let yearInterest = 0;
        
        for(let month=1; month<=12; month++){
          const interest = balance * rate;
          const principalPaid = emi - interest;
          
          yearPrincipal += principalPaid;
          yearInterest += interest;
          balance -= principalPaid;
        }
        
        amortization += `<tr>
          <td>${year}</td>
          <td>${fmt(yearPrincipal)}</td>
          <td>${fmt(yearInterest)}</td>
          <td>${fmt(balance)}</td>
        </tr>`;
      }
      
      amortization += '</tbody></table></div>';
      document.getElementById('emiBreakup').innerHTML = amortization;
    }

    // Prepayment Calculator
    function calculatePrepayment(){
      const balance = parseFloat(document.getElementById('currentBalance').value);
      const rate = parseFloat(document.getElementById('prepayRate').value)/1200;
      const tenure = parseFloat(document.getElementById('remainingTenure').value);
      const emi = parseFloat(document.getElementById('currentEMI').value);
      const prepay = parseFloat(document.getElementById('prepayAmount').value);
      const prepayType = document.getElementById('prepayType').value;
      
      if(!balance || !rate || !tenure || !emi || !prepay || balance <= 0 || rate <= 0 || tenure <= 0 || emi <= 0 || prepay <= 0) {
        document.getElementById('prepayResult').innerHTML = '<p class="text-danger">Please enter valid positive values for all fields.</p>';
        return;
      }
      
      let newBalance = balance - prepay;
      let resultHTML = '';
      
      if(newBalance <= 0) {
        document.getElementById('prepayResult').innerHTML = '<p class="text-success">Prepayment amount exceeds loan balance. Loan would be fully paid off.</p>';
        return;
      }
      
      if(prepayType === 'reduceEMI'){
        // Calculate new EMI with same tenure
        const newEMI = newBalance * rate * Math.pow(1+rate, tenure) / (Math.pow(1+rate, tenure)-1);
        const interestSaved = (emi * tenure) - (newEMI * tenure);
        
        resultHTML = makeTable([
          ['Original EMI', emi],
          ['New EMI', newEMI],
          ['Monthly Savings', emi - newEMI],
          ['Total Interest Saved', interestSaved],
          ['New Loan Balance', newBalance]
        ]);
      } else {
        // Calculate new tenure with same EMI
        if(emi <= newBalance * rate) {
          document.getElementById('prepayResult').innerHTML = '<p class="text-danger">Error: EMI is too low to cover interest on the new balance. Please increase EMI or reduce prepayment amount.</p>';
          return;
        }
        const newTenure = Math.ceil(Math.log(emi / (emi - newBalance * rate)) / Math.log(1 + rate));
        const interestSaved = (emi * tenure) - (emi * newTenure);
        
        resultHTML = makeTable([
          ['Original Tenure (months)', tenure],
          ['New Tenure (months)', newTenure],
          ['Tenure Reduced By (months)', tenure - newTenure],
          ['Total Interest Saved', interestSaved],
          ['New Loan Balance', newBalance]
        ]);
      }
      
      document.getElementById('prepayResult').innerHTML = resultHTML;
    }

    // Salary employee
    function calcSalary(){
      const c=parseFloat(document.getElementById('ctc').value), pct=parseFloat(document.getElementById('basicPercent').value);
      if(!c||!pct) {
        document.getElementById('salResult').innerHTML = '<p class="text-danger">Please enter valid values for CTC and Basic %.</p>';
        return;
      }
      const basic=c*pct/100, pfEr=basic*0.12, pfEe=basic*0.12, gratuity=basic*0.0481, gross=c-pfEr-gratuity;
      const taxable=Math.max(0,gross-50000); // Standard deduction of 50,000 for new regime
      const slabs=[[300000,0],[600000,0.05],[900000,0.1],[1200000,0.15],[1500000,0.2],[Infinity,0.3]];
      let tax=0,last=0; for(const[lim,r] of slabs){ if(taxable>lim){tax+=(lim-last)*r; last=lim;} else {tax+=(taxable-last)*r; break;} }
      const cess=tax*0.04, totalTax=tax+cess;
      const rebate = (taxable <= 700000) ? Math.min(totalTax, 25000) : 0; // New regime rebate
      const finalTax = totalTax - rebate;
      const netAnnual=gross-pfEe-finalTax, netMonthly=netAnnual/12;

      document.getElementById('salResult').innerHTML=makeTable([
        ['Basic',basic],
        ['Employer PF Contribution',pfEr],
        ['Gratuity Payable',gratuity],
        ['Gross Salary (Annual)',gross],
        ['Taxable Income (New Regime)',taxable],
        ['Income Tax (before cess/rebate)',tax],
        ['87A Rebate',-rebate],
        ['Health & Education Cess',cess],
        ['Total Income Tax',finalTax],
        ['Employee PF Contribution',pfEe],
        ['Net Annual Take-Home Salary',netAnnual],
        ['Net Monthly Take-Home Salary',netMonthly]
      ]);
    }

    // Salary employer
    function calcEmployer(){
      const net=parseFloat(document.getElementById('desiredNet').value), pct=parseFloat(document.getElementById('empBasicPercent').value);
      if(!net||!pct) {
        document.getElementById('empResult').innerHTML = '<p class="text-danger">Please enter valid values for Desired Net Monthly Take-Home and Basic %.</p>';
        return;
      }

      // This is a simplified reverse calculation and might need more refinement
      // For simplicity, assuming a fixed tax rate or a gross-up approach
      // A more accurate calculation would involve iterative tax calculation
      
      // Estimate gross based on net and assuming some deductions and tax percentage
      // This factor (1.35) is a rough estimate and might need adjustment based on actual tax slabs and deductions.
      const estimatedGrossAnnual = net * 12 / (1 - 0.20 - 0.12); // Assuming ~20% tax + 12% employee PF
      const estimatedGrossMonthly = estimatedGrossAnnual / 12;

      const basic = estimatedGrossMonthly * (pct / 100);
      const pfEmployer = basic * 0.12;
      const gratuity = basic * 0.0481;
      const ctcMonthly = estimatedGrossMonthly + pfEmployer + gratuity;
      const ctcAnnual = ctcMonthly * 12;

      document.getElementById('empResult').innerHTML=makeTable([
        ['Estimated Gross Monthly Salary',estimatedGrossMonthly],
        ['Basic (of Gross Monthly)',basic],
        ['Employer PF Contribution (Monthly)',pfEmployer],
        ['Gratuity Provision (Monthly)',gratuity],
        ['Estimated CTC (Monthly)',ctcMonthly],
        ['Estimated CTC (Annual)',ctcAnnual]
      ]);
    }

    // Income tax
    function calcIncomeTax(){
      const income=parseFloat(document.getElementById('grossInc').value)||0;
      const d80c=Math.min(parseFloat(document.getElementById('ded80c').value)||0,150000);
      const dNps=Math.min(parseFloat(document.getElementById('dedNps').value)||0,50000);
      const d80d=parseFloat(document.getElementById('ded80d').value)||0;
      const d24b=Math.min(parseFloat(document.getElementById('ded24b').value)||0,200000);
      const d80e=parseFloat(document.getElementById('ded80e').value)||0;
      const d80g=parseFloat(document.getElementById('ded80g').value)||0;
      const dOther=parseFloat(document.getElementById('dedOther').value)||0;
      const stdDed=50000;
      let deductions=0; // Initialize with 0, add standard deduction later if applicable
      const regime=document.getElementById('taxRegime').value;

      if(regime==='old') {
        deductions = stdDed + d80c + dNps + d80d + d24b + d80e + d80g + dOther;
      } else { // New regime
        deductions = stdDed; // Only standard deduction is allowed in new regime
      }
      
      const taxable=Math.max(0,income-deductions);

      const slab=(val,arr)=>{let t=0,l=0;for(const[lim,r] of arr){if(val>lim){t+=(lim-l)*r;l=lim;}else{t+=(val-l)*r;break;}}return t;};
      
      let tax = 0;
      if(regime === 'old'){
        tax=slab(taxable,[[250000,0],[500000,0.05],[1000000,0.2],[Infinity,0.3]]);
      } else { // New regime
        tax=slab(taxable,[[300000,0],[600000,0.05],[900000,0.1],[1200000,0.15],[1500000,0.2],[Infinity,0.3]]);
      }
      
      const rebate=(regime==='old'&&taxable<=500000)?Math.min(tax,12500):(regime==='new'&&taxable<=700000?Math.min(tax,25000):0);
      const cess=(tax-rebate)*0.04;
      const total=tax-rebate+cess;

      document.getElementById('taxResult').innerHTML=makeTable([
        ['Gross Income',income],
        ['Total Deductions',deductions],
        ['Taxable Income',taxable],
        ['Income Tax (before rebate & cess)',tax],
        ['87A Rebate',-rebate],
        ['Health & Education Cess',cess],
        ['Total Income Tax Payable',total]
      ]);
    }

    // PF / Gratuity projection
    function calcPF(){
      const mb=parseFloat(document.getElementById('pfBasic').value), done=parseFloat(document.getElementById('yearsDone').value), left=parseFloat(document.getElementById('yearsLeft').value), bal=parseFloat(document.getElementById('currentPF').value)||0, rate=parseFloat(document.getElementById('pfRate').value)||8.25;
      if(!mb||done<0||left<0) {
        document.getElementById('pfResult').innerHTML = '<p class="text-danger">Please enter valid values for Basic, Years Completed, and Years Left.</p>';
        return;
      }
      const monthlyEe = Math.min(mb, 15000) * 0.12; // Employee contribution capped at 15000 basic for PF calculation
      const monthlyEr = Math.min(mb, 15000) * 0.12; // Employer contribution capped
      const annualContrib = (monthlyEe + monthlyEr) * 12;

      let corpus = bal;
      const totalYears = done + left;

      for(let i = 0; i < left; i++){
        corpus = (corpus + annualContrib) * (1 + rate / 100);
      }
      
      const gratuityValue = (mb * 15 / 26) * totalYears; // Gratuity based on actual basic, not capped
      const gratuity = Math.min(gratuityValue, 2000000); // Gratuity tax-free limit is 20 Lakhs

      document.getElementById('pfResult').innerHTML=makeTable([
        ['Monthly Employee PF Contribution', monthlyEe],
        ['Monthly Employer PF Contribution', monthlyEr],
        ['Projected PF Corpus (at retirement)', corpus],
        ['Projected Gratuity (after service)', gratuity]
      ]);
    }

    // HRA Exemption
    function calcHRA(){
      const basic=parseFloat(document.getElementById('hraBasic').value), hra=parseFloat(document.getElementById('hraRec').value), rent=parseFloat(document.getElementById('rentPaid').value);
      if(!basic||!hra||!rent) {
        document.getElementById('hraResult').innerHTML = '<p class="text-danger">Please enter valid values for Basic Salary, HRA Received, and Rent Paid.</p>';
        return;
      }
      const annualBasic=basic*12, hraAnnual=hra*12, rentAnnual=rent*12;
      const tenPc=annualBasic*0.10;
      const percentBasic=(document.getElementById('isMetro').value==='yes'?0.50:0.40)*annualBasic;
      const excessRent=Math.max(0,rentAnnual-tenPc);
      const exemption=Math.min(hraAnnual,excessRent,percentBasic);
      const taxableHRA = hraAnnual - exemption;

      document.getElementById('hraResult').innerHTML=makeTable([
        ['Actual HRA received (Annual)',hraAnnual],
        ['Rent paid minus 10% of Basic (Annual)',excessRent],
        [`${document.getElementById('isMetro').value==='yes'?'50%':'40%'} of Basic Salary (Annual)`,percentBasic],
        ['HRA Exemption (Annual)',exemption],
        ['Taxable HRA (Annual)',taxableHRA]
      ]);
    }

    // Pension
    function calcPension(){
      const b=parseFloat(document.getElementById('lastBasic').value), y=parseFloat(document.getElementById('serviceYears').value), f=parseFloat(document.getElementById('pensFactor').value)||1;
      if(!b||!y) {
        document.getElementById('pensResult').innerHTML = '<p class="text-danger">Please enter valid values for Last Drawn Basic and Total Years of Service.</p>';
        return;
      }
      // EPS calculation is capped at 15000 basic for pensionable salary
      const pensionableSalary = Math.min(b, 15000);a
      const pensionableService = Math.min(y, 35); // Max pensionable service is 35 years

      const monthlyPension = (pensionableSalary * pensionableService) / 70;
      const annualPension = monthlyPension * 12;

      document.getElementById('pensResult').innerHTML=makeTable([
        ['Pensionable Salary (capped at ₹15,000)', pensionableSalary],
        ['Pensionable Service (capped at 35 years)', pensionableService],
        ['Estimated Monthly Pension (EPS)', monthlyPension],
        ['Estimated Annual Pension (EPS)', annualPension]
      ]);
    }
  </script>
  <script>
(function(){
  if(!window.chatbase||window.chatbase("getState")!=="initialized"){
    window.chatbase=(...arguments)=>{
      if(!window.chatbase.q){window.chatbase.q=[]}
      window.chatbase.q.push(arguments)
    };
    window.chatbase=new Proxy(window.chatbase,{
      get(target,prop){
        if(prop==="q"){return target.q}
        return(...args)=>target(prop,...args)
      }
    });
  }
  const onLoad=function(){
    const script=document.createElement("script");
    script.src="https://www.chatbase.co/embed.min.js";
    script.id="jGGdI6q3-czolU1bVXbJF";
    script.domain="www.chatbase.co";
    document.body.appendChild(script);
  };
  if(document.readyState==="complete"){onLoad()}
  else{window.addEventListener("load",onLoad)}
})();
</script>

<script>
  window.addEventListener("load", () => {
    const adjustChatPosition = () => {
      const chatIframe = document.querySelector('iframe[src*="chatbase.co"]');
      if (chatIframe) {
        chatIframe.style.right = "30px";
        chatIframe.style.bottom = "20px";
      } else {
        setTimeout(adjustChatPosition, 300);
      }
    };
    adjustChatPosition();
  });
</script>
<script>
  const observer = new MutationObserver(() => {
    const iframe = document.querySelector('iframe[src*="chatbase.co"]');
    if (iframe) {
      iframe.style.right = '1000px'; // Move further left
      iframe.style.bottom = '20px';
      iframe.style.zIndex = '9999'; // Ensure visibility
      observer.disconnect(); // Stop watching after success
    }
  });

  observer.observe(document.body, { childList: true, subtree: true });
</script>
</body>
</html>
